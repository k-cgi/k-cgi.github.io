# RパッケージRvestを利用したwebスクレイピング
Rでwebスクレイポングをするならrvestというライブラリ（パッケージ）が便利。htmlファイルから特定の属性を持つ要素を抽出したりできる。これを利用して、データベースに登録されているサンプルの情報や遺伝子の配列などをまとめて取ってくることができる。なお、webスクレイピングをする際は、アクセス先のサーバーに負荷をかけないように注意。<br>
tidyverse、stringrなどのライブラリも併用すると便利（ここでは扱わない）。なお、rvestのみだとjavascriptや読み込みにスクロールが必要なサイトをスクレイピングするのは難しい。その場合はselenium等を利用する（RSeleniumを併用する）。
## スクレイピングの基本
まずはデータを抽出したいサイトの構造を調べる。ブラウザの開発者ツール（chromeならF12キーで出てくる）等を用いてやると、欲しいデータがどこに置いてあるかが分かりやすくて良い。また、抽出したい情報が複数ページにまたがっていたり、検索語句によって表示されるページの構造が変わる場合があるので、いろいろな条件で実験してページの構造がどのように変化するのかを見てみる。今回は例として、ラン科の交配情報のデータベース（）にアクセスして、Cymbidium属同士の交配種の一覧を取得する。
## rvestのインストール
他のライブラリと同様に`install.packages("rvest")`でインストール可能。
## 基本の関数
### read_html
`read_html("URL")`の形で使用。指定したURLからhtmlファイルを取得するコマンド。
### html_text
### html_nodes
`html_nodes("TAG")`の形で使用。指定したタグの付いたノードを取得する。`html_nodes("h2")`でh2をとってくる。
### html_attr
### html_table
`html_table(HTML)`の形で使用。指定したhtmlファイルから表を抜き出す。複数ある場合は、リストが返ってくる。
