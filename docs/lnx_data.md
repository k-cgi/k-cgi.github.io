# Linuxでデータ整形
## 文字列
### perl
### grep
### sed
#### 最短一致
#### タブ文字の検索
#### 正規表現
## データ
### awk
### sort
ファイルを行ごとにで並べ替えるコマンド。複数列からなるファイルの場合は、ある列を基準に並び替えたりもできる。
#### オプション
`-k`：並べ替えの対象行と並べ替えの方法を指定できる。複数指定した場合、1つ目で指定した列が同じものは2つ目で指定した列でソートされる。nやrを指定する場合は、最後のk以外で指定する数値を固定したほうが良い（例：`sort -k 2,2nr -k 1n INPUT`）。また、.（ピリオド）で何文字目を基準にソートするかを指定できる（例：一列目の3文字目でソート`sort -k 1.3 INPUT`）<br>
`-t`：列を区切る文字を指定できる。デフォルトは空白文字。タブ区切りの場合は`-t $'\t'`と指定する。<br>
`-n`：数字を数値として並び替える。類似のものに`-h` `-V`がある。<br>
`-r`：降順で並べ替える。
#### 例
```
$ sort -k 2n INPUT #2列目を数値としてソートする
$ sort -k 3nr -t "," INPUT #タブを区切り文字とし、3列目を数値として降順でソートする。
$ sort -k 3,3 -k 4n -t $'\t' INPUT #3列目でソートした後、4列目を数値としてソートする
```
### uniq
### grep
### comm

## 組み合わせた例
以下のように、タブ区切りで遺伝子名、GOターム、発現量の情報がこの順で含まれている2つのファイルがあるとする。
```
$ cat File1
AT1G308911  GO:12345678 24
AT1G301231  GO:13455654 54
AT1G312531  GO:00183941 8221
~~~略~~~

$ cat File2
AT1G308911  GO:12345678 73
AT1G301231  GO:13455654 1023
AT1G312531  GO:00183941 3816
~~~略~~~

```
**例：2番目のファイルのみに含まれる遺伝子の一覧を取得**
```
$ comm -13 <(awk '{print $1}' File1 | sort) <(awk '{print $1}' File2 | sort) | uniq > OUT.txt
```
File2にのみ含まれる遺伝子名が重複を除いた状態でOUT.txtに出力される。<br>
**例：発現量が100より大きいの遺伝子のうち、両方のファイルに含まれる遺伝子の一覧を取得**
```
$ comm -12 <(awk '(if $3>100){print $1}' File1 | sort) <(awk '(if $3>100){print $1}' File2 | sort) | uniq > OUT.txt
```
発現量が100より大きい遺伝子で、File1とFile2に共通な遺伝子名が重複を除いた状態でOUT.txtに出力される。<br>
**例：File1のうち、GOタームのリスト（GO_list.txt）に含まれるGOをもつ遺伝子の一覧を取得**
```
$ cat GO_list.txt
GO:00000001
GO:00001231
GO:00002334
~~~略~~~

$ grep -f GO_list.txt File1 | awk '{print $1}' | sort | uniq > OUT.txt
```
File1の遺伝子のうちGO_list.txtに含まれるGOが付与された遺伝子名が重複を除いた状態でOUT.txtに出力される。<br>
